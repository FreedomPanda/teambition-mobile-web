<ion-view class="SettingProfileView" ng-controller="SettingProfileView as SettingProfileCtrl">

  <ion-header-bar>
    <button
        ng-if="RootCtrl.ionicHistoryHasBackView()"
        ng-click="RootCtrl.ionicHistoryGoBack()"
        class="button">
      <i class="icon icon-chevron-left"></i>
      <!-- <span>Back</span> -->
    </button>
    <h1 class="title">个人资料</h1>
    <button
        ng-click="SettingProfileCtrl.editOrSave()"
        class="button">
      <span>{{
        SettingProfileCtrl.isSaving() ?
          '保存中' :
          (SettingProfileCtrl.isEditing() ?
            (SettingProfileCtrl.ME.$dirty ? '保存' : '取消') :
            '编辑')
      }}</span>
    </button>
  </ion-header-bar>

  <ion-content ng-class="{ editing: SettingProfileCtrl.isEditing() }">

    <form name="SettingProfileCtrl.ME">

      <header>
        <div><img ng-src="{{ SettingProfileCtrl.me.avatarUrl }}" /></div>
        <div>
          <h2>{{ SettingProfileCtrl.me.name }}</h2>
          <div>{{ SettingProfileCtrl.me.email }}</div>
        </div>
      </header>

      <label ng-show="SettingProfileCtrl.isEditing()">
        <span>姓名</span>
        <span ng-model="SettingProfileCtrl.me.name">{{ SettingProfileCtrl.me.name }}</span>
        <input name="name" ng-model="SettingProfileCtrl.me.name" required minlength="2" maxlength="30" ng-trim="true" />
      </label>
      <label ng-show="SettingProfileCtrl.isEditing() || SettingProfileCtrl.me.title" for="title">
        <span>职位</span>
        <span>{{ SettingProfileCtrl.me.title }}</span>
        <input name="title" ng-model="SettingProfileCtrl.me.title" ng-trim="true" />
      </label>
      <label ng-show="SettingProfileCtrl.isEditing() || SettingProfileCtrl.me.birthday">
        <span>生日</span>
        <span>{{ SettingProfileCtrl.me.birthday | date: 'yyyy-MM-dd' }}</span>
        <input name="birthday" ng-model="SettingProfileCtrl.me.birthday" type="date" />
      </label>
      <label ng-show="SettingProfileCtrl.isEditing() || SettingProfileCtrl.me.location">
        <span>地址</span>
        <span>{{ SettingProfileCtrl.me.location }}</span>
        <input name="location" ng-model="SettingProfileCtrl.me.location" ng-trim="true" />
      </label>
      <label ng-show="SettingProfileCtrl.isEditing() || SettingProfileCtrl.me.phone">
        <span>手机号</span>
        <span>{{ SettingProfileCtrl.me.phone }}</span>
        <input name="phone" ng-model="SettingProfileCtrl.me.phone" type="number" />
      </label>
      <label ng-show="SettingProfileCtrl.isEditing() || SettingProfileCtrl.me.website">
        <span>个人网址</span>
        <span>{{ SettingProfileCtrl.me.website }}</span>
        <input name="website" ng-model="SettingProfileCtrl.me.website" type="url" />
      </label>
    </form>
  </ion-content>
</ion-view>
