<ion-view class="MyEventListView" ng-controller="MyEventListView as MyEventListCtrl">

  <ion-header-bar>
    <button
        ng-if="RootCtrl.ionicHistoryHasBackView()"
        ng-click="RootCtrl.ionicHistoryGoBack()"
        class="button button-clear">
      <i class="icon icon-chevron-left"></i>
      <!-- <span>Back</span> -->
    </button>
    <h1 class="title">我的日程</h1>
  </ion-header-bar>

  <ion-content>

    <ion-list>

      <section ng-if="MyEventListCtrl.EVENTS[label].length" ng-repeat="label in MyEventListCtrl.getLabels()">

        <div class="item item-divider">
          <span>{{ MyEventListCtrl.EVENT_DATE_TO_LABEL[label] }}</span>
        </div>

        <ion-item
            ng-repeat="event in MyEventListCtrl.EVENTS[label]"
            ng-switch="label"
            ng-href="#/detail/event/{{ event._id }}">

          <div>
            <h3>{{ event.title }}</h3>
          </div>

          <div ng-switch-when="FUTURE">
            <time>{{ event.startDate | formatDate: 'calendar' }}</time>
          </div>

          <div ng-switch-when="OLD">
            <time>{{ event.endDate | formatDate: 'calendar' }}</time>
          </div>

          <div ng-switch-default>
            <time>{{ event.startDate | date: 'HH:mm' }} - {{ event.endDate | date: 'HH:mm' }}</time>
          </div>
        </ion-item>
      </section>
    </ion-list>
  </ion-content>
</ion-view>
